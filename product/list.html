{* ìƒí’ˆ ëª©ë¡ í˜ì´ì§€ *}
<div class="product-list-page">
    <!-- ë¸Œë ˆë“œí¬ëŸ¼ -->
    <nav class="breadcrumb">
        <a href="{$mall_url}">í™ˆ</a> > 
        {if $category_name}
            <a href="{$category_url}">{$category_name}</a> > 
        {/if}
        <span>ìƒí’ˆ ëª©ë¡</span>
    </nav>
    
    <!-- í˜ì´ì§€ ì œëª© -->
    <h1 class="page-title">{$category_name|default:"ì „ì²´ ìƒí’ˆ"}</h1>
    
    <!-- ìƒí’ˆ ê°œìˆ˜ ë° ì •ë ¬ -->
    <div class="product-header">
        <div class="product-count">
            ì´ <strong>{$product_count}</strong>ê°œì˜ ìƒí’ˆ
        </div>
        
        <div class="product-sort">
            <select onchange="location.href='{$current_url}?sort='+this.value">
                <option value="newest" {if $sort == 'newest'}selected{/if}>ìµœì‹ ìˆœ</option>
                <option value="price_low" {if $sort == 'price_low'}selected{/if}>ê°€ê²© ë‚®ì€ìˆœ</option>
                <option value="price_high" {if $sort == 'price_high'}selected{/if}>ê°€ê²© ë†’ì€ìˆœ</option>
                <option value="popular" {if $sort == 'popular'}selected{/if}>ì¸ê¸°ìˆœ</option>
                <option value="review" {if $sort == 'review'}selected{/if}>ë¦¬ë·°ìˆœ</option>
            </select>
        </div>
    </div>
    
    <!-- í•„í„° ì„¹ì…˜ -->
    <div class="filter-section">
        <div class="filter-controls">
            <!-- ì¹´í…Œê³ ë¦¬ í•„í„° -->
            <div class="category-filter">
                <label>ì¹´í…Œê³ ë¦¬:</label>
                <select onchange="location.href=this.value">
                    <option value="{$all_category_url}">ì „ì²´</option>
                    {foreach from=$category_list item=cat}
                        <option value="{$cat.link}" {if $cat.selected}selected{/if}>{$cat.name}</option>
                    {/foreach}
                </select>
            </div>
            
            <!-- ê°€ê²© í•„í„° -->
            <div class="price-filter">
                <label>ê°€ê²©ëŒ€:</label>
                <select onchange="location.href='{$current_url}?price='+this.value">
                    <option value="">ì „ì²´</option>
                    <option value="0-100000" {if $price_filter == '0-100000'}selected{/if}>10ë§Œì› ì´í•˜</option>
                    <option value="100000-200000" {if $price_filter == '100000-200000'}selected{/if}>10ë§Œì› - 20ë§Œì›</option>
                    <option value="200000-300000" {if $price_filter == '200000-300000'}selected{/if}>20ë§Œì› - 30ë§Œì›</option>
                    <option value="300000+" {if $price_filter == '300000+'}selected{/if}>30ë§Œì› ì´ìƒ</option>
                </select>
            </div>
            
            <!-- ë¸Œëœë“œ í•„í„° -->
            {if $brand_list}
                <div class="brand-filter">
                    <label>ë¸Œëœë“œ:</label>
                    <select onchange="location.href='{$current_url}?brand='+this.value">
                        <option value="">ì „ì²´</option>
                        {foreach from=$brand_list item=brand}
                            <option value="{$brand.id}" {if $brand.selected}selected{/if}>{$brand.name}</option>
                        {/foreach}
                    </select>
                </div>
            {/if}
        </div>
    </div>
    
    <!-- ìƒí’ˆ ê·¸ë¦¬ë“œ -->
    <div class="product-grid">
        {if $product_list}
            {foreach from=$product_list item=product}
                <div class="product-item" data-product-id="{$product.id}">
                    <div class="product-image">
                        <a href="{$product.link}">
                            <img src="{$product.image}" alt="{$product.name}" loading="lazy">
                        </a>
                        
                        <!-- ìƒí’ˆ ì•¡ì…˜ ë²„íŠ¼ -->
                        <div class="product-actions">
                            <a href="#none" class="btnQuickView" onclick="{$product.quick_view_func}">ë¹ ë¥¸ë³´ê¸°</a>
                            <a href="#none" class="btnWishlist" onclick="{$product.wishlist_func}">â™¥</a>
                        </div>
                        
                        <!-- í• ì¸ ë°°ì§€ -->
                        {if $product.discount_rate > 0}
                            <div class="discount-badge">{$product.discount_rate}%</div>
                        {/if}
                    </div>
                    
                    <div class="product-info">
                        <h3 class="product-name">
                            <a href="{$product.link}">{$product.name}</a>
                        </h3>
                        
                        <div class="product-price">
                            {if $product.discount_price}
                                <span class="current-price">{$product.discount_price|number_format}ì›</span>
                                <span class="original-price">{$product.price|number_format}ì›</span>
                            {else}
                                <span class="current-price">{$product.price|number_format}ì›</span>
                            {/if}
                        </div>
                        
                        <div class="product-rating">
                            <span class="stars">{$product.rating_stars}</span>
                            <span class="review-count">({$product.review_count})</span>
                        </div>
                        
                        <!-- ì¥ë°”êµ¬ë‹ˆ ë²„íŠ¼ -->
                        <a href="#none" class="btnAddCart" onclick="{$product.cart_func_add}">ì¥ë°”êµ¬ë‹ˆ ë‹´ê¸°</a>
                    </div>
                </div>
            {/foreach}
        {else}
            <div class="no-product">
                <div class="no-product-icon">ğŸ”</div>
                <h3>ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤</h3>
                <p>ë‹¤ë¥¸ ê²€ìƒ‰ì–´ë¡œ ë‹¤ì‹œ ì‹œë„í•´ë³´ì„¸ìš”.</p>
            </div>
        {/if}
    </div>
    
    <!-- í˜ì´ì§• -->
    {if $paging}
        <div class="pagination">
            {$paging}
        </div>
    {/if}
</div>
